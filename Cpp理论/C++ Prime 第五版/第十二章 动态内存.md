# **动态内存和指针**

- 智能指针：负责自动释放所指向的对象

- 类型

  - `shared_ptr` ：允许多个指针指向同个对象

    - 操作

       ![20220313153841](https://raw.githubusercontent.com/Be-A-God/Drawing-bed/main/note/20220313153841.png)

       ![20220313153855](https://raw.githubusercontent.com/Be-A-God/Drawing-bed/main/note/20220313153855.png)
    
    - 调用 `make_shared` 标准库函数返回一个 `shared_ptr` 指针对象
    - 内部具有引用计数，其数目与指向同一对象的 `shared_ptr` 对象数目一致
    - 引用计数为零时自动释放 `shared_ptr` 所指向的对象
    - 定位 `new` 表达式传递 `nothrow` 参数时，分配失败返回空指针（不引发异常）
    - 可以使用 `new` 返回的指针初始化智能指针
    - 返回 `shared_ptr` 的函数不能在其返回语句中隐式转换成普通指针
    - 成员函数 `get()` 返回一个内置指针（不能 `delete` 不能绑定到其他智能指针）
    - 其他方法

      ![20220313154511](https://raw.githubusercontent.com/Be-A-God/Drawing-bed/main/note/20220313154511.png)

      ![20220313154539](https://raw.githubusercontent.com/Be-A-God/Drawing-bed/main/note/20220313154539.png)

    - 规范

      ![20220313154557](https://raw.githubusercontent.com/Be-A-God/Drawing-bed/main/note/20220313154557.png)

  - `unique_ptr` ：独占所指向的对象


  - `weak_ptr` ：弱引用，指向 `shared_ptr` 所管理的对象

---

# **动态数组**