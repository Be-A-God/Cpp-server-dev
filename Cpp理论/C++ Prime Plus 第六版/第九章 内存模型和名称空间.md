# **单独编译**

- 头文件一般只放置结构声明和使用该结构的函数的原型（避免函数和变量的定义）

- 头文件包含内容

    ![头文件.png](http://120.77.180.209/2022/03/07/3259090b9f0c2.png)

- 头文件避免多次包含：条件编译或者 `#pramgra once`

---

# **存储持续性、作用域和链接性**

- 持续性

  - 自动变量：在有限作用域之后被释放
  - 静态：关键字 `static` ，整个程序周期都存在
  - 线程：关键字 `thread_local` ，与线程生命周期一致
  - 动态：`new` 分配，直到 `delete` 删除

- 作用域和链接

  - 静态持续变量

    - 外部链接性（其他文件可访问）：代码块外声明
    - 内部链接性（当前文件可访问）：代码块外声明，且使用 `static` 限定
    - 无链接性（当前函数或代码块访问）：代码块内声明，且 `static` 限定

  - 变量存储方式

    ![变量存储方式.png](http://120.77.180.209/2022/03/07/2f998905c2af5.png)

  - 琐碎

    - 使用关键字 `constexpr` 表示常量表达式并在编译器计算
    - 引用外部变量使用 `extern`
    - 作用域解析符 `::` 指定访问变量的版本（运算符前为空时为全局变量）
    - 静态局部变量会存储最后一次离开的值，只进行一次初始化

  - cv 限定符

    - `const` ：全局 `const` 等同全局 `static` ，限定在单文件中（可以将常量类型放在头文件中供多文件使用）
    - 可以使用 `extern` 取消其内部链接性的限制
    - `volatile` ：避免多次使用值时缓存到寄存器的优化（确保每次的值都是最新的）

  - `mutable` ：即使结构或类的变量为 `const` ，某个成员仍旧可以修改（改变只读性）

  - 函数和链接性

    - 静态，整个程序执行期间一直存在
    - 默认为外部链接性，可以使用 `static` 设置内部链接性（原型和定义都使用关键字）

- 存储方案和动态分配

  - 定位 `new` 运算符：指定要使用的位置
  - 包含头文件 `#include <new>` 
  - 使用：`new (position) typeName;`
  - 不能用 `delete` 删除定位在静态内存的空间

---

# **名称空间**

- 关键字 `namespace` 

- 不能位于代码块中，默认为外部链接性

- 使用作用域解析符 `::` 访问特定命名空间成员

- 声明和编译指令：`using std::cout;` `using namespace std;`

- 局部同名声明会覆盖命名空间成员

- 原则

  ![命名空间使用原则.png](http://120.77.180.209/2022/03/07/35f0095aec278.png)