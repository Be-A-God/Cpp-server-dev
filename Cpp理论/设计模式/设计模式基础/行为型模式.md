# **模板方法模式**

- 概念：在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤

- 角色

  - 抽象类：声明作为算法步骤的方法，以及依次调用它们的实际模板方法
  - 具体类：重写所有步骤，但是不能重写模板方法自身

- 应用场景

  - 扩展某个特定算法步骤而不是整个算法或其结构
  - 多个类算法除细微处几乎一样；后果是一旦算法发生变化，需要修改所有的类

- 优缺点

  - 优点

    - 允许客户端重写大型算法中的特定部分
    - 将重复代码提取到一个超类中

  - 缺点

    - 通过子类抑制默认步骤实现违反里氏替换原则
    - 模板方法中步骤越多，维护越难
    - 部分客户端受算法框架的限制

- [实现](https://github.com/Be-A-God/Cpp-server-dev-code/blob/main/GoF23/Template/main.cpp)

---

# **命令模式**

- 概念：将请求转换为一个包含与请求相关的所有信息的独立对象

- 应用场景

  - 需要通过操作来参数化对象
  - 需要将操作放入队列中或远程执行操作
  - 实现操作回滚功能

- 角色

  - 发送者：负责对请求进行初始化，其中必须包含一个成员变量来存储对于命令对象的引用
  - 命令：通常仅声明一个执行命令的方法
  - 具体命令：会实现各种类型的请求
  - 接收者：包含部分业务逻辑。 几乎任何对象都可以作为接收者，接收者自己会完成实际的工作
  - 客户端：会创建并配置具体命令对象

- 优缺点

  - 优点

    - 单一
    - 开闭
    - 实现撤销和恢复
    - 实现操作的延迟执行
    - 将一组简单命令组合成一个复杂命令

  - 缺点

    - 代码复杂

- [实现](https://github.com/Be-A-God/Cpp-server-dev-code/blob/main/GoF23/Command/main.cpp)

---

# **观察者模式**

- 概念：允许你定义一种订阅机制， 可在对象事件发生时通知多个 “观察” 该对象的其他对象

- 应用场景

  - 一个对象状态的改变需要改变其他对象时
  - 一些对象必须观察其他对象时

- 角色

  - 发布者：向其他对象发送事件
  - 订阅者：声明了通知接口
  - 具体订阅者：可以执行一些操作来回应发布者的通知
  - 客户端：分别创建发布者和订阅者对象，然后为订阅者注册发布者更新

- 优缺点

  - 优点

    - 开闭
    - 运行时建立对象之间的联系

  - 缺点

    - 订阅者的通知顺序是随机的

- [实现](https://github.com/Be-A-God/Cpp-server-dev-code/blob/main/GoF23/Observer/main.cpp)

---

# **策略模式**

- 概念：能让你定义一系列算法， 并将每种算法分别放入独立的类中， 以使算法的对象能够相互替换

- 角色

  - 上下文：维护指向具体策略的引用，且仅通过策略接口与该对象进行交流
  - 策略：是所有具体策略的接口，声明了一个上下文用于执行策略的方法
  - 具体策略：实现上下文所用算法的各种不同变种
  - 客户端：创建一个特定策略对象并将其创递给上下文

- 应用场景

  - 运行时切换算法
  - 拥有许多仅在执行某些行为时略有不同的相似类的时候
  - 算法在上下文的逻辑中不是特别重要的时候
  - 减少类中复杂条件运算符切换算法变体

- 优缺点

  - 优点

    - 运行时切换算法
    - 算法实现和算法使用的代码隔离
    - 使用组合代替继承
    - 开闭

  - 缺点

    - 算法极少改变时引入会让程序过于复杂
    - 客户端必须知道策略间的不同
    - 使用匿名函数实现不同版本算法可以替代该模式


- [实现](https://github.com/Be-A-God/Cpp-server-dev-code/blob/main/GoF23/Strategy/main.cpp)

---

# **迭代器模式**

- 概念：能在不暴露集合底层表现形式 （列表、 栈和树等） 的情况下遍历集合中所有的元素

- 角色

  - 迭代器：声明了遍历集合所需要的操作
  - 具体迭代器：实现遍历集合的一种特定算法
  - 集合：声明了一个或多个方法来获取与集合兼容的迭代器
  - 具体集合：客户端请求时返回一个特定的具体迭代器实体
  - 客户端：通过集合和迭代器的接口与两者进行交互

- 应用场景

  - 隐藏集合本身复杂的数据结构
  - 减少程序中重复的遍历代码
  - 代码能够遍历不同的甚至无法预知的数据结构

- 优缺点

  - 优点

    - 单一
    - 开闭
    - 并行遍历同一集合
    - 可以暂停遍历

  - 缺点

    - 简单集合反而影响效率
    - 某些情况，迭代器比直接遍历效率低


- [实现](https://github.com/Be-A-God/Cpp-server-dev-code/blob/main/GoF23/Iterator/main.cpp)
